{"version":3,"sources":["no-means-no.png","theme.js","components/Map/Map.js","components/Sidebar/ListingItem.js","components/Popup/Popup.js","constants.js","vendor/mapbox.js","components/Sidebar/Sidebar.js","components/Icon/Icon.js","locationData.js","components/App/App.js","index.js"],"names":["module","exports","theme","gray100","gray200","gray300","blue100","green900","linen","mistyrose","white","spacing","factor","Wrapper","styled","div","Map","id","activeLocation","locationId","Name","a","props","Distance","p","ListingItem","roundedDistance","properties","name","address","city","state","country","distance","onClick","Math","round","href","defaultProps","Address","React","memo","phone","googleMapsUrl","instagramUrl","target","MAPBOX_PUBLIC_ACCESS_TOKEN","flyToLocation","currentLocation","map","flyTo","center","geometry","coordinates","zoom","createPopup","Popup","popUps","document","getElementsByClassName","remove","google_maps_url","instagram_url","el","createElement","ReactDOM","render","key","mapboxgl","closeButton","setLngLat","setDOMContent","addTo","createGeoJson","async","Tabletop","init","simpleSheet","data","geojson","type","features","forEach","index","shop","postal_code","lat","lon","longitude","parseFloat","latitude","push","console","log","loadGeocoder","locations","setLocations","addControl","geocoder","MapboxGeocoder","accessToken","marker","on","ev","searchResult","result","options","units","location","Object","defineProperty","value","turf","writable","enumerable","configurable","sorted","sort","b","bbox","sortedLocations","locationIdentifier","lats","sortedLons","sortDistance","sortedLats","getBox","fitBounds","padding","initGeocoder","Heading","Listings","Sidebar","title","setActiveLocation","i","icon","Icon","e","stopPropagation","street","App","useState","undefined","setMap","useEffect","container","style","fetchLocations","callback","addSource","loadMap","Marker","offset","addMarkers","getElementById"],"mappings":"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","file":"static/js/main.8954f0a6.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/no-means-no.fe014caf.png\";","export const theme = {\n  gray100: '#eee',\n  gray200: '#444',\n  gray300: '#333',\n  blue100: '#e3f4fb',\n  green900: '#5f7256',\n  linen: '#f5f3e6',\n  mistyrose: '#ffe9dd',\n  white: '#fff',\n  spacing: factor => `${factor * 8}px`,\n}\n","import React from 'react'\nimport styled from '@emotion/styled'\n\nconst Wrapper = styled.div`\n  border-left: 1px solid #fff;\n  position: absolute;\n  left: 33.3333%;\n  width: 66.6666%;\n  top: 0;\n  bottom: 0;\n  -webkit-box-sizing: border-box;\n  -moz-box-sizing: border-box;\n  box-sizing: border-box;\n`\n\nconst Map = () => <Wrapper id=\"map-container\"></Wrapper>\n\nexport default Map\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport styled from '@emotion/styled'\n\nconst Wrapper = styled.div`\n  background-color: ${({ activeLocation, locationId }) => {\n    return activeLocation === locationId ? '#f8f8f8' : '#fff'\n  }};\n  display: block;\n  border-bottom: 1px solid #eee;\n  padding: 10px;\n  text-decoration: none;\n`\n\nconst Name = styled.a`\n  display: block;\n  color: ${props => props.theme.gray300};\n  font-weight: 700;\n`\n\nconst Distance = styled.p`\n  color: ${props => props.theme.gray200};\n`\n\nconst ListingItem = ({\n  properties: { name, address, city, state, country, distance },\n  activeLocation,\n  locationId,\n  onClick,\n}) => {\n  let roundedDistance\n  if (distance) {\n    roundedDistance = Math.round(distance * 100) / 100\n  }\n\n  return (\n    <Wrapper locationId={locationId} activeLocation={activeLocation}>\n      <Name href=\"#\" onClick={onClick}>\n        {name}\n      </Name>\n      <div>{address}</div>\n      <div>{`${city}, ${state} ${country}`}</div>\n      {distance && (\n        <Distance>\n          <strong>{`${roundedDistance} miles away`}</strong>\n        </Distance>\n      )}\n    </Wrapper>\n  )\n}\n\nListingItem.propTypes = {\n  properties: PropTypes.object,\n}\n\nListingItem.defaultProps = {\n  properties: {},\n}\n\nexport default ListingItem\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport { ThemeProvider } from 'emotion-theming'\nimport styled from '@emotion/styled'\nimport { theme } from '../../theme'\n\nconst Wrapper = styled.div`\n  padding: ${props => props.theme.spacing(1)};\n  color: ${props => props.theme.gray200};\n`\n\nconst Name = styled.div`\n  background: ${props => props.theme.gray300};\n  color: ${props => props.theme.white};\n  padding: ${props => props.theme.spacing(1)};\n  font-size: 1.2rem;\n  min-width: 120px;\n`\n\nconst Address = styled.div`\n  color: ${props => props.theme.gray200};\n`\n\nconst Popup = ({\n  name,\n  address,\n  city,\n  state,\n  country,\n  phone,\n  googleMapsUrl,\n  instagramUrl,\n}) => {\n  return (\n    <ThemeProvider theme={theme}>\n      <Name>{name}</Name>\n      <Wrapper>\n        <Address>{address}</Address>\n        <div>{`${city} ${state} ${country}`}</div>\n        <div>{phone}</div>\n        <div>\n          <a href={googleMapsUrl} target=\"_blank\">\n            Directions\n          </a>\n        </div>\n        {instagramUrl && (\n          <div>\n            <a href={instagramUrl} target=\"_blank\">\n              Instagram\n            </a>\n          </div>\n        )}\n      </Wrapper>\n    </ThemeProvider>\n  )\n}\n\nPopup.propTypes = {\n  name: PropTypes.string,\n  address: PropTypes.string,\n}\n\nexport default React.memo(Popup)\n","export const MAPBOX_PUBLIC_ACCESS_TOKEN =\n  'pk.eyJ1Ijoic3RpbGxub3Rhc2tpbmdmb3JpdCIsImEiOiJjazVrNjQ0OGcwYXRoM2VvNjljdXplY29oIn0.osX0C8NqyvuDUIMCCekxyw'\n\nexport const MAPBOX_STYLE_URL =\n  'mapbox://styles/stillnotaskingforit/ck61lf3e5089u1immtt8zj0jr'\n\nexport const GOOGLE_SHEETS_URL =\n  'https://docs.google.com/spreadsheets/d/1PzOmbsWPMOkF7lsU-eQbdd2ZF_tQ6tS6C4b_xQfP6jE/edit#gid=290454584'\n","import mapboxgl from 'mapbox-gl'\nimport MapboxGeocoder from '@mapbox/mapbox-gl-geocoder'\nimport * as turf from '@turf/turf'\nimport Tabletop from 'tabletop'\nimport React from 'react'\nimport ReactDOM from 'react-dom'\nimport {\n  MAPBOX_PUBLIC_ACCESS_TOKEN,\n  MAPBOX_STYLE_URL,\n  GOOGLE_SHEETS_URL,\n} from '../constants'\n\nexport const flyToLocation = (currentLocation, map) => {\n  if (typeof map !== 'undefined') {\n    map.flyTo({\n      center: currentLocation.geometry.coordinates,\n      zoom: 15,\n    })\n  }\n}\n\nexport const createPopup = (currentLocation, map, Popup) => {\n  const popUps = document.getElementsByClassName('mapboxgl-popup')\n  /** Check if there is already a popup on the map and if so, remove it */\n  if (popUps[0]) popUps[0].remove()\n\n  const {\n    properties: {\n      name,\n      address,\n      city,\n      state,\n      country,\n      phone,\n      google_maps_url,\n      instagram_url,\n    },\n  } = currentLocation\n\n  const el = document.createElement('div')\n  ReactDOM.render(\n    <Popup\n      key={name}\n      name={name}\n      address={address}\n      city={city}\n      state={state}\n      country={country}\n      phone={phone}\n      googleMapsUrl={google_maps_url}\n      instagramUrl={instagram_url}\n    />,\n    el,\n  )\n\n  const popup = new mapboxgl.Popup({ closeButton: false })\n    .setLngLat(currentLocation.geometry.coordinates)\n    .setDOMContent(el)\n    .addTo(map)\n}\n\nexport const addMarkers = (locations, map, Icon, setActiveLocation) => {\n  locations.features.forEach(function(marker) {\n    var el = document.createElement('div')\n    ReactDOM.render(\n      <Icon marker={marker} map={map} setActiveLocation={setActiveLocation} />,\n      el,\n    )\n\n    new mapboxgl.Marker(el, { offset: [0, -23] })\n      .setLngLat(marker.geometry.coordinates)\n      .addTo(map)\n  })\n}\n\nexport const createGeoJson = async () => {\n  try {\n    const data = await Tabletop.init({\n      key: GOOGLE_SHEETS_URL,\n      simpleSheet: true,\n    })\n\n    const geojson = {\n      type: 'FeatureCollection',\n      features: [],\n    }\n\n    data.forEach(\n      (\n        {\n          shop,\n          address,\n          city,\n          state,\n          postal_code,\n          country,\n          phone,\n          lat,\n          lon,\n          google_maps_url,\n          instagram_url,\n        },\n        index,\n      ) => {\n        const longitude = lon ? parseFloat(lon) : ''\n        const latitude = lat ? parseFloat(lat) : ''\n\n        geojson.features.push({\n          type: 'Feature',\n          id: index,\n          geometry: {\n            type: 'Point',\n            coordinates: [longitude, latitude],\n          },\n          properties: {\n            name: shop,\n            address,\n            city,\n            state,\n            postal_code,\n            country,\n            phone,\n            google_maps_url,\n            instagram_url,\n            lat,\n            lon,\n          },\n        })\n      },\n    )\n\n    return geojson\n  } catch (err) {\n    console.log('Error in createGeoJson', err)\n  }\n}\n\nexport const createMap = container => {\n  mapboxgl.accessToken = MAPBOX_PUBLIC_ACCESS_TOKEN\n\n  const map = new mapboxgl.Map({\n    container,\n    style: MAPBOX_STYLE_URL,\n    center: [-48.331871, 32.792194],\n    zoom: 2,\n  })\n\n  return map\n}\n\nexport const loadMap = async (locations, map, callback) => {\n  map.on('load', function(e) {\n    /* Add the data to your map as a layer */\n    map.addSource('places', {\n      type: 'geojson',\n      data: locations,\n    })\n\n    callback()\n  })\n}\n\nexport const loadGeocoder = (locations, map, setLocations) => {\n  map.addControl(initGeocoder(), 'top-left')\n\n  function initGeocoder() {\n    const geocoder = new MapboxGeocoder({\n      accessToken: MAPBOX_PUBLIC_ACCESS_TOKEN,\n      mapboxgl,\n      marker: true,\n    })\n\n    geocoder.on('result', function(ev) {\n      var searchResult = ev.result.geometry\n      var options = { units: 'miles' }\n      locations.features.forEach(location => {\n        Object.defineProperty(location.properties, 'distance', {\n          value: turf.distance(searchResult, location.geometry, options),\n          writable: true,\n          enumerable: true,\n          configurable: true,\n        })\n      })\n\n      const sorted = sortLocationsByDistance()\n\n      setLocations({\n        type: 'FeatureCollection',\n        features: sorted,\n      })\n\n      const bbox = getBox(locations, 0, searchResult)\n\n      map.fitBounds(bbox, {\n        padding: 100,\n      })\n    })\n\n    return geocoder\n  }\n\n  function sortLocationsByDistance() {\n    return locations.features.sort(function(a, b) {\n      if (a.properties.distance > b.properties.distance) {\n        return 1\n      }\n      if (a.properties.distance < b.properties.distance) {\n        return -1\n      }\n      return 0\n    })\n  }\n\n  function getBox(sortedLocations, locationIdentifier, searchResult) {\n    const lats = [\n      sortedLocations.features[locationIdentifier].geometry.coordinates[1],\n      searchResult.coordinates[1],\n    ]\n\n    const lons = [\n      sortedLocations.features[locationIdentifier].geometry.coordinates[0],\n      searchResult.coordinates[0],\n    ]\n\n    const sortedLons = lons.sort(sortDistance)\n    const sortedLats = lats.sort(sortDistance)\n\n    return [\n      [sortedLons[0], sortedLats[0]],\n      [sortedLons[1], sortedLats[1]],\n    ]\n\n    function sortDistance(a, b) {\n      if (a > b) return 1\n      if (a.distance < b.distance) return -1\n      return 0\n    }\n  }\n}\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport styled from '@emotion/styled'\nimport ListingItem from './ListingItem'\nimport Popup from '../Popup'\nimport { flyToLocation, createPopup } from '../../vendor/mapbox'\n\nconst Wrapper = styled.div`\n  width: 33.3333%;\n  position: absolute;\n  height: 100%;\n  top: 0;\n  left: 0;\n  overflow: hidden;\n  border-right: 1px solid rgba(0, 0, 0, 0.25);\n`\n\nconst Heading = styled.div`\n  background: ${props => props.theme.gray300};\n  border-bottom: 1px solid ${props => props.theme.gray100};\n  line-height: 40px;\n  padding: 8px;\n  font-size: 1.5rem;\n  color: ${props => props.theme.white};\n`\n\nconst Listings = styled.div`\n  height: 100%;\n  overflow: auto;\n  padding-bottom: 60px;\n  box-sizing: border-box;\n  line-height: 24px;\n  color: ${props => props.theme.gray200};\n`\n\nconst Sidebar = ({\n  title,\n  map,\n  locations = [],\n  activeLocation,\n  setActiveLocation,\n}) => {\n  const onListingItemClick = currentLocation => {\n    flyToLocation(currentLocation, map)\n    createPopup(currentLocation, map, Popup)\n    setActiveLocation(currentLocation.id)\n  }\n\n  return (\n    <Wrapper>\n      <Heading>{title}</Heading>\n      <Listings>\n        {locations.map((location, i) => {\n          return (\n            <ListingItem\n              key={location.properties.name}\n              activeLocation={activeLocation}\n              properties={location.properties}\n              locationId={location.id}\n              onClick={() => onListingItemClick(location)}\n            />\n          )\n        })}\n      </Listings>\n    </Wrapper>\n  )\n}\n\nSidebar.propTypes = {\n  locations: PropTypes.array,\n}\n\nSidebar.defaultProps = {\n  locations: [],\n}\n\nexport default Sidebar\n","import React from 'react'\nimport styled from '@emotion/styled'\nimport Popup from '../Popup'\nimport { flyToLocation, createPopup } from '../../vendor/mapbox'\nimport icon from '../../no-means-no.png'\n\nconst Wrapper = styled.div`\n  background: url(${icon}) no-repeat;\n  background-size: 42px;\n  background-position: center;\n  border: none;\n  cursor: pointer;\n  height: 56px;\n  width: 56px;\n  background-color: rgba(0, 0, 0, 0);\n`\n\nconst Icon = ({ marker, map, setActiveLocation }) => {\n  const handleClick = e => {\n    flyToLocation(marker, map)\n    createPopup(marker, map, Popup)\n    setActiveLocation(marker.id)\n    e.stopPropagation()\n  }\n\n  return <Wrapper onClick={handleClick} />\n}\n\nexport default Icon\n","export const shops = {\n  features: [\n    {\n      type: 'Feature',\n      properties: {\n        name: 'Allied Tattoo',\n        street: '48 1/2, Grattan Street',\n        city: 'Brooklyn',\n        state: 'NY',\n        postal_code: '11237',\n        country: 'United States',\n        phone: '(347) 725-4861',\n      },\n      geometry: {\n        coordinates: [-73.933471, 40.705617],\n        type: 'Point',\n      },\n      id: '270fa324095a732970da109ac8b1a22e',\n    },\n    {\n      type: 'Feature',\n      properties: {\n        name: 'All-Star Tattoo Co.',\n        street: '19114 Telegraph Rd',\n        city: 'Brownstown Charter Twp',\n        state: 'MI',\n        postal_code: '48174',\n        country: 'United States',\n        phone: '(734) 992-4891',\n      },\n      geometry: {\n        coordinates: [-83.269679, 42.16601],\n        type: 'Point',\n      },\n      id: '45b70c3517057773e5f78949cef8ab21',\n    },\n    {\n      type: 'Feature',\n      properties: {\n        name: '717 Tattoo',\n        street: '4901 Jonestown Rd',\n        city: 'Harrisburg',\n        state: 'PA',\n        postal_code: '17109',\n        country: 'United States',\n        phone: '(717) 652-7717',\n      },\n      geometry: {\n        coordinates: [-76.809328, 40.304719],\n        type: 'Point',\n      },\n      id: '5b16b4f81bc8a55a1335806f297b965f',\n    },\n    {\n      type: 'Feature',\n      properties: {\n        name: 'Aether Tattoo Club',\n        street: '7720 Shedhorn Dr Unit C',\n        city: 'Bozeman',\n        state: 'MT',\n        postal_code: '59718',\n        country: 'United States',\n        phone: '(406) 624-0432',\n      },\n      geometry: {\n        coordinates: [-111.184522, 45.671695],\n        type: 'Point',\n      },\n      id: '6256d453967c8379616add223d7f5d02',\n    },\n    {\n      type: 'Feature',\n      properties: {\n        name: '37 Tattoo',\n        street: '532, Calle Piura',\n        city: 'Miraflores',\n        state: '',\n        postal_code: '15074',\n        country: 'Peru',\n        phone: '(+51) 1 4601333',\n      },\n      geometry: {\n        coordinates: [-77.03623, -12.115859],\n        type: 'Point',\n      },\n      id: 'd47ed43e22b73bdc660ebb28b2adadfb',\n    },\n  ],\n  type: 'FeatureCollection',\n}\n\nconst modifyShops = () => {\n  shops.features.forEach((shop, i) => {\n    shop.properties.id = i\n  })\n}\n\nmodifyShops()\n","import React, { useState, useEffect } from 'react'\nimport styled from '@emotion/styled'\nimport Map from '../Map'\nimport Sidebar from '../Sidebar'\nimport Icon from '../Icon'\nimport {\n  createMap,\n  addMarkers,\n  loadMap,\n  loadGeocoder,\n  createGeoJson,\n} from '../../vendor/mapbox'\nimport { shops } from '../../locationData'\nimport 'mapbox-gl/dist/mapbox-gl.css'\nimport '@mapbox/mapbox-gl-geocoder/dist/mapbox-gl-geocoder.css'\nimport './app.css'\n\nconst Wrapper = styled.div`\n  display: flex;\n  flex-direction: row;\n  height: 100%;\n`\n\nconst App = () => {\n  const [locations, setLocations] = useState(undefined)\n  const [activeLocation, setActiveLocation] = useState(null)\n  const [map, setMap] = useState(null)\n\n  const fetchLocations = async () => {\n    const locations = await createGeoJson()\n    setLocations(locations)\n    setMap(createMap('map-container'))\n  }\n\n  useEffect(() => {\n    fetchLocations()\n  }, [])\n\n  useEffect(() => {\n    if (locations) {\n      const callback = () => {\n        addMarkers(locations, map, Icon, setActiveLocation)\n      }\n\n      loadMap(locations, map, callback)\n      loadGeocoder(locations, map, setLocations)\n    }\n  }, [map])\n\n  return (\n    <Wrapper id=\"app\">\n      <Sidebar\n        title=\"Participating shops\"\n        map={map}\n        locations={locations && locations.features}\n        activeLocation={activeLocation}\n        setActiveLocation={setActiveLocation}\n      />\n      <Map map={map} />\n    </Wrapper>\n  )\n}\n\nexport default App\n","/**\n * Created by Adam Bohannon - 2020\n * https://github.com/abohannon\n */\n\nimport React from 'react'\nimport ReactDOM from 'react-dom'\nimport { ThemeProvider } from 'emotion-theming'\nimport { theme } from './theme'\nimport './index.css'\nimport App from './components/App'\n\nconst WrappedApp = () => (\n  <ThemeProvider theme={theme}>\n    <App />\n  </ThemeProvider>\n)\n\nReactDOM.render(<WrappedApp />, document.getElementById('root'))\n"],"sourceRoot":""}